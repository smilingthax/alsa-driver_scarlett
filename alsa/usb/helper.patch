--- ../alsa-kernel/usb/helper.c	2010-03-10 09:22:24.488022926 +0100
+++ helper.c	2010-03-10 09:52:23.975522071 +0100
@@ -1,3 +1,5 @@
+#define __NO_VERSION__
+#include "usbaudio.inc"
 /*
  *   This program is free software; you can redistribute it and/or modify
  *   it under the terms of the GNU General Public License as published by
@@ -90,8 +92,13 @@
 		if (!buf)
 			return -ENOMEM;
 	}
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(2, 6, 12)
 	err = usb_control_msg(dev, pipe, request, requesttype,
 			      value, index, buf, size, timeout);
+#else
+	err = usb_control_msg(dev, pipe, request, requesttype,
+			      value, index, buf, size, timeout * HZ / 1000);
+#endif
 	if (size > 0) {
 		memcpy(data, buf, size);
 		kfree(buf);
