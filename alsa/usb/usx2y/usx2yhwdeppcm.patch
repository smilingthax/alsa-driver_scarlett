--- ../../alsa-kernel/usb/usx2y/usx2yhwdeppcm.c	2004-12-07 12:23:37.452839956 +0100
+++ usx2yhwdeppcm.c	2004-12-07 12:26:24.732747471 +0100
@@ -1,3 +1,14 @@
+#include <linux/config.h>
+#include <linux/version.h>
+
+#if LINUX_VERSION_CODE < KERNEL_VERSION(2,6,5)
+#define SND_NEED_USB_SET_INTERFACE
+#if LINUX_VERSION_CODE < KERNEL_VERSION(2,6,0)
+#define SND_NEED_USB_WRAPPER
+#endif
+#define __NO_VERSION__
+#endif
+
 /*
  *   This program is free software; you can redistribute it and/or modify
  *   it under the terms of the GNU General Public License as published by
@@ -226,7 +237,11 @@
 }
 
 
+#ifndef OLD_USB
 static void i_usX2Y_usbpcm_urb_complete(struct urb *urb, struct pt_regs *regs)
+#else
+static void i_usX2Y_usbpcm_urb_complete(struct urb *urb)
+#endif
 {
 	snd_usX2Y_substream_t *subs = (snd_usX2Y_substream_t*)urb->context;
 	usX2Ydev_t *usX2Y = subs->usX2Y;
@@ -308,7 +323,11 @@
 		wake_up(&usX2Y->prepare_wait_queue);
 	}
 
+#ifndef OLD_USB
 	i_usX2Y_usbpcm_urb_complete(urb, regs);
+#else
+	i_usX2Y_usbpcm_urb_complete(urb);
+#endif
 }
 
 /*
