#
# Configuration Makefile for ALSA driver
# Copyright (c) 1994-98 by Jaroslav Kysela <perex@suse.cz>
#

NEW_KBUILD       = @NEW_KBUILD@

mainsrcdir	= @srcdir@
MAINSRCDIR	= @SRCDIR@

CROSS_COMPILE   ?= @CROSS_COMPILE@
ifndef NEW_KBUILD
AS		= $(CROSS_COMPILE)@AS@
LD		= $(CROSS_COMPILE)@LD@
CC		= $(CROSS_COMPILE)@CC@
CPP		= $(CROSS_COMPILE)@CPP@
AR		= $(CROSS_COMPILE)@AR@
MODFLAGS	= -DMODULE=1
CFLAGS_KERNEL	=
GENKSYMS	= @GENKSYMS@
endif

prefix		= @prefix@
exec_prefix	= @exec_prefix@
sysconfdir	= @sysconfdir@
bindir		= @bindir@
sbindir		= @sbindir@
mandir		= @mandir@
moddir		= @moddir@
moddir_tree	= @moddir_tree@
c_opts		= @c_opts@
m_opts		= @m_opts@
processor	= @processor@
msmp		= @msmp@
kaversion	= @kaversion@
kversion	= @kversion@
kpatchlevel	= @kpatchlevel@
ksublevel	= @ksublevel@
kextraversion	= @kextraversion@

CONFIG_SND_VERSION	= @CONFIG_SND_VERSION@
CONFIG_SND_KERNELDIR	= @CONFIG_SND_KERNELDIR@
CONFIG_MODULES		= y
CONFIG_SND              = m
CONFIG_SND_MVERSION	= @CONFIG_SND_MVERSION@
CONFIG_PCI		= @CONFIG_PCI@
CONFIG_ISA		= @CONFIG_ISA@
CONFIG_ISAPNP_KERNEL	= @CONFIG_ISAPNP_KERNEL@
CONFIG_PNP_KERNEL	= @CONFIG_PNP_KERNEL@
CONFIG_ISAPNP		= @CONFIG_ISAPNP@
CONFIG_PNP		= @CONFIG_PNP@
CONFIG_SGI		= @CONFIG_SGI@
CONFIG_L3		= @CONFIG_L3@
CONFIG_X86		= @CONFIG_X86@
CONFIG_ALPHA		= @CONFIG_ALPHA@
CONFIG_ARM		= @CONFIG_ARM@
CONFIG_PPC		= @CONFIG_PPC@
CONFIG_PARISC		= @CONFIG_PARISC@
CONFIG_X86_PC9800	= @CONFIG_X86_PC9800@
CONFIG_PCMCIA		= @CONFIG_PCMCIA@
CONFIG_SND_SEQUENCER	= @CONFIG_SND_SEQUENCER@
CONFIG_SND_SEQ_DUMMY    = @CONFIG_SND_SEQUENCER@
CONFIG_SND_OSSEMUL	= @CONFIG_SND_OSSEMUL@
ifeq (y,$(CONFIG_SND_OSSEMUL))
  CONFIG_SND_MIXER_OSS	= m
  CONFIG_SND_PCM_OSS	= m
  ifeq (m,$(CONFIG_SND_SEQUENCER))
    CONFIG_SND_SEQUENCER_OSS = y
  endif
else
  CONFIG_SND_MIXER_OSS	=
  CONFIG_SND_PCM_OSS	=
  CONFIG_SND_SEQUENCER_OSS =
endif
CONFIG_SND_RTCTIMER	= @CONFIG_SND_RTCTIMER@
CONFIG_RTC		= @CONFIG_RTC@
CONFIG_USB		= @CONFIG_USB@
CONFIG_SND_BIT32_EMUL	= @CONFIG_SND_BIT32_EMUL@
CONFIG_VIDEO_DEV	= @CONFIG_VIDEO_DEV@

ifndef NEW_KBUILD
INCLUDE		= -I$(TOPDIR)/include @EXTRA_INCLUDES@ @KERNEL_INC@
CFLAGS		= $(MODFLAGS) $(INCLUDE) $(c_opts) -Wall -Wstrict-prototypes \
	-fomit-frame-pointer -Wno-trigraphs -O2 -fno-strict-aliasing -fno-common \
	-pipe -DALSA_BUILD -nostdinc -iwithprefix include
MAKE		+= $(m_opts)
SNDVERSIONS	= $(TOPDIR)/include/sndversions.h
DEXPORT		= $(TOPDIR)/include/modules
else
EXTRA_CFLAGS += -I$(MAINSRCDIR)/include -Iinclude -DALSA_BUILD
CPPFLAGS := $(subst -Iinclude ,,$(CPPFLAGS))
CFLAGS := $(subst -Iinclude ,,$(CFLAGS))
endif

