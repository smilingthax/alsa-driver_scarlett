csp_load.c:

  This is a source file for simple CSP microcode loader for Sound Blaster 16ASP and some 
Sound Blaster AWE32 sound cards with Creative Signal Processor (CSP) chip (CT1748A) installed.
It can also be used as post-install function for snd-sb16-csp module to load default codec at
module installation. If CSP chip is succesfully detected and initialized, it will be installed
as a hardware dependant device hwC0D2 into /dev/snd directory. 'csp_load' executable can be
compiled with 'make csp_load' command in alsa-driver/test directory. 

  If Sound Blaster 16ASP card name is 'card1', then status of CSP chip can be read from
/proc/asound/card1/sb16-csp file. After initialization, this file will show:

Creative Signal Processor [v1.0]
State: -x---

  It is possible to load hardware codecs, supplied with your SB16ASP Windows drivers now.
Currently, following codecs can be loaded to CSP device:
  -wfm0001a.csp: QSound decoder
  -wfm0006a.csp: A-law codec
  -wfm0007a.csp: u-law codec
  -wfm0011a.csp: IMA ADPCM codec

These codecs won't be supported by ALSA:
  -wfm0200a.csp: Creative ADPCM codec
  -wfm0201a.csp: Text2Speech
  -wfm0202a.csp: Fast Speech 8 codec
  -wfm0203a.csp: Fast Speech 10 codec

  To load for example function #2 from QSound microcode file (this works for my CSP v1.0), you should type: 
'./csp_load wfm0001a.csp 2'. Usually, there are 1 - 4 functions present in each CSP micrcode file,
they can be different codecs for different CSP hardware versions, or one function for hardware coder 
and the other for hardware decoder. After successful loading, /proc/asound/card1/sb16-csp will show:

Creative Signal Processor [v1.0]
State: -x--L
Codec loaded: QSOUND [func #2]
QSound decoder disabled

  With QSound effect microcode loaded, all supported file formats can be played with QSound 180 degree
positioning applied.

  QSound element is integrated into mixer structure as 3D Effect1 - space element, but it will be only
shown if CSP chip has been found and support for CSP was compiled into ALSA drivers. When enabled, QSound
position can be dynamically changed by mixer slider position, and proc interface will follow the state
of CSP chip and its current QSound position:

Creative Signal Processor [v1.0]
State: Qx-RL
Codec loaded: QSOUND [func #2]
QSound decoder enabled
Processing 16bit mono PCM samples
Qsound position: left = 0x9, right = 0x9

  Driver now supports autoloading of Mu-Law, A-Law and Ima-ADPCM codecs. Autoloading is activated only when
there is no microcode loaded to CSP, and there is NO need to preload appropriate *.CSP files. To unload
manually loaded microcode, use './csp_load -u'.

  If microcode for hardware codec is manually loaded, then CSP will support only loaded PCM format and
autoloading will be disabled. In such case, proc interface will show:

Creative Signal Processor [v1.0]
State: -x--L
Codec loaded: IMA-ADPCM [func #2]
Supported PCM format ID: 0x400000 (16bit/-) [mono/stereo] [-/W]
[uros@pegaz 0]$ 

  All CSP functions can be accessed by IOCTL interface. Please look at alsa-driver/include/sb16_csp.h
for further information.



