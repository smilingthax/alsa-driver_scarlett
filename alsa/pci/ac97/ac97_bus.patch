--- ../../alsa-kernel/pci/ac97/ac97_bus.c	2005-10-31 14:43:37.000000000 +0100
+++ ac97_bus.c	2005-10-31 15:04:06.000000000 +0100
@@ -1,3 +1,5 @@
+#include <sound/driver.h>
+#undef device_driver
 /*
  * Linux driver model AC97 bus interface
  *
@@ -31,8 +33,11 @@
 	int ret = 0;
 
 	if (dev->driver && dev->driver->suspend)
+#ifdef CONFIG_SND_OLD_DRIVER_SUSPEND
+		ret = dev->driver->suspend(dev, state, SUSPEND_POWER_DOWN);
+#else
 		ret = dev->driver->suspend(dev, state);
-
+#endif
 	return ret;
 }
 
@@ -41,7 +46,11 @@
 	int ret = 0;
 
 	if (dev->driver && dev->driver->resume)
+#ifdef CONFIG_SND_OLD_DRIVER_SUSPEND
+		ret = dev->driver->resume(dev, RESUME_POWER_ON);
+#else
 		ret = dev->driver->resume(dev);
+#endif
 
 	return ret;
 }
