--- ../../alsa-kernel/pci/ctxfi/ctatc.c	2009-05-14 15:20:33.000000000 +0200
+++ ctatc.c	2009-05-14 16:55:54.000000000 +0200
@@ -1,3 +1,4 @@
+#include "adriver.h"
 /**
  * Copyright (C) 2008, Creative Technology Ltd. All Rights Reserved.
  *
@@ -1197,7 +1198,7 @@
 	enum CTCARDS i;
 
 	subsys = pci->subsystem_device;
-	revision = pci->revision;
+	revision = snd_pci_revision(pci);
 	atc->chip_details = NULL;
 	atc->model = NUM_CTCARDS;
 	for (d = atc_chip_details; d->vendor; d++) {
