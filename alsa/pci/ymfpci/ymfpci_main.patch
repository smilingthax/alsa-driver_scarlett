--- ../../alsa-kernel/pci/ymfpci/ymfpci_main.c	2006-10-12 20:24:27.000000000 +0200
+++ ymfpci_main.c	2006-10-22 22:42:15.000000000 +0200
@@ -1,3 +1,4 @@
+#define __NO_VERSION__
 /*
  *  Copyright (c) by Jaroslav Kysela <perex@suse.cz>
  *  Routines for control of YMF724/740/744/754 chips
@@ -2001,8 +2002,13 @@
 	int err, is_1e;
 	const char *name;
 
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(2, 5, 0)
 	err = request_firmware(&chip->dsp_microcode, "yamaha/ds1_dsp.fw",
 			       &chip->pci->dev);
+#else
+	err = request_firmware(&chip->dsp_microcode, "yamaha/ds1_dsp.fw",
+			       pci_name(chip->pci));
+#endif
 	if (err >= 0) {
 		if (chip->dsp_microcode->size == YDSXG_DSPLENGTH)
 			snd_ymfpci_convert_from_le(chip->dsp_microcode);
@@ -2023,8 +2029,13 @@
 		chip->device_id == PCI_DEVICE_ID_YAMAHA_744 ||
 		chip->device_id == PCI_DEVICE_ID_YAMAHA_754;
 	name = is_1e ? "yamaha/ds1e_ctrl.fw" : "yamaha/ds1_ctrl.fw";
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(2, 5, 0)
 	err = request_firmware(&chip->controller_microcode, name,
 			       &chip->pci->dev);
+#else
+	err = request_firmware(&chip->controller_microcode, name,
+			       pci_name(chip->pci));
+#endif
 	if (err >= 0) {
 		if (chip->controller_microcode->size == YDSXG_CTRLLENGTH)
 			snd_ymfpci_convert_from_le(chip->controller_microcode);
